import{e as x,r as v,f as w,o as p,c as h,a as o,g as t,w as m,h as e,i as y,j as g,z as b,k as i,t as V}from"./vendor.6a80e32c.js";import{u as k,_ as j,F as r}from"./useForm.46f89abd.js";import{u as C,_ as N}from"./useError.c494153b.js";import{u as S}from"./index.69cff91e.js";const T={class:"bg-white flex flex-col justify-center py-12 sm:px-6 lg:px-8"},B={class:"sm:mx-auto sm:w-full sm:max-w-md"},E=o("h2",{class:"mt-6 text-center text-3xl font-extrabold text-gray-darkest"}," Create your account ",-1),F={class:"mt-2 text-center text-sm text-gray-dark"},U=i(" Already have an account? "+V(" ")+" "),$=i(" login "),A={class:"mt-8 sm:mx-auto sm:w-full sm:max-w-md"},G={class:"bg-white py-8 px-4 shadow-md sm:rounded sm:px-10"},I=["onSubmit"],O=i("Sign Up"),J=x({setup(P){let c=S(!1),s=k({name:"",email:"",password:""}),u=C(),n=v(!1);async function f(){if(n.value)return;n.value=!0;let d=await fetch("https://resman-rewards-api.herokuapp.com/api/auth/register",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(s.values)}),a=await d.json();if(d.status!==201){u.set(a.message||a.error),n.value=!1;return}n.value=!1,c.authenticate(a.data.token)}return(d,a)=>{const _=w("router-link");return p(),h("div",T,[o("div",B,[E,o("p",F,[U,t(_,{to:{name:"auth.login"},class:"font-medium text-yellow hover:text-yellow-light"},{default:m(()=>[$]),_:1},8,["to"])])]),o("div",A,[o("div",G,[e(u).show.value?(p(),y(j,{key:0,variant:"error",message:e(u).message.value,class:"mb-6",onHide:a[0]||(a[0]=l=>e(u).clear())},null,8,["message"])):g("",!0),o("form",{class:"space-y-6",onSubmit:b(f,["prevent"])},[t(e(r).Group,{name:"name",label:"Your Name"},{default:m(()=>[t(e(r).TextInput,{modelValue:e(s).values.name,"onUpdate:modelValue":a[1]||(a[1]=l=>e(s).values.name=l),id:"name",name:"name",type:"text"},null,8,["modelValue"])]),_:1}),t(e(r).Group,{name:"email",label:"Your Email Address"},{default:m(()=>[t(e(r).TextInput,{modelValue:e(s).values.email,"onUpdate:modelValue":a[2]||(a[2]=l=>e(s).values.email=l),id:"email",name:"email",type:"email",autocomplete:"email"},null,8,["modelValue"])]),_:1}),t(e(r).Group,{name:"password",label:"Password"},{default:m(()=>[t(e(r).TextInput,{modelValue:e(s).values.password,"onUpdate:modelValue":a[3]||(a[3]=l=>e(s).values.password=l),id:"password",name:"password",type:"password",autocomplete:"current-password"},null,8,["modelValue"])]),_:1}),o("div",null,[t(N,{type:"submit",loading:e(n)},{default:m(()=>[O]),_:1},8,["loading"])])],40,I)])])])}}});export{J as default};
