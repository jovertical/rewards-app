import{e as x,r as h,f as w,o as c,c as v,a as t,g as a,w as i,h as e,i as y,j as g,z as b,k as u,t as k}from"./vendor.6a80e32c.js";import{u as j,_ as V,F as m}from"./useForm.46f89abd.js";import{u as C,_ as F}from"./useError.c494153b.js";import{u as N}from"./index.69cff91e.js";const S={class:"bg-white flex flex-col justify-center py-12 sm:px-6 lg:px-8"},T={class:"sm:mx-auto sm:w-full sm:max-w-md"},B=t("h2",{class:"mt-6 text-center text-3xl font-extrabold text-gray-darkest"}," Login to continue ",-1),E={class:"mt-2 text-center text-sm text-gray-dark"},$=u(" Or "+k(" ")+" "),O=u(" create your account "),A={class:"mt-8 sm:mx-auto sm:w-full sm:max-w-md"},G={class:"bg-white py-8 px-4 shadow-md sm:rounded sm:px-10"},I=["onSubmit"],L=t("div",{class:"flex justify-end"},[t("div",{class:"text-sm"},[t("a",{href:"javascript:void(0);",class:"font-medium text-yellow"}," Forgot your password? ")])],-1),P=u("Login"),M=x({setup(U){let p=N(),o=j({email:"",password:""}),r=C(),l=h(!1);async function f(){if(l.value)return;l.value=!0;let d=await fetch("https://resman-rewards-api.herokuapp.com/api/auth/login",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(o.values)}),s=await d.json();if(d.status!==200){r.set(s.error||s.message),l.value=!1;return}l.value=!1,p.authenticate(s.data.token)}return(d,s)=>{const _=w("router-link");return c(),v("div",S,[t("div",T,[B,t("p",E,[$,a(_,{to:{name:"auth.register"},class:"font-medium text-yellow hover:text-yellow-light"},{default:i(()=>[O]),_:1},8,["to"])])]),t("div",A,[t("div",G,[e(r).show.value?(c(),y(V,{key:0,variant:"error",message:e(r).message.value,class:"mb-6",onHide:s[0]||(s[0]=n=>e(r).clear())},null,8,["message"])):g("",!0),t("form",{class:"space-y-6",onSubmit:b(f,["prevent"])},[a(e(m).Group,{name:"email",label:"Email Address"},{default:i(()=>[a(e(m).TextInput,{modelValue:e(o).values.email,"onUpdate:modelValue":s[1]||(s[1]=n=>e(o).values.email=n),id:"email",name:"email",type:"email",autocomplete:"email"},null,8,["modelValue"])]),_:1}),a(e(m).Group,{name:"password",label:"Password"},{default:i(()=>[a(e(m).TextInput,{modelValue:e(o).values.password,"onUpdate:modelValue":s[2]||(s[2]=n=>e(o).values.password=n),id:"password",name:"password",type:"password",autocomplete:"current-password"},null,8,["modelValue"])]),_:1}),L,t("div",null,[a(F,{type:"submit",loading:e(l)},{default:i(()=>[P]),_:1},8,["loading"])])],40,I)])])])}}});export{M as default};
